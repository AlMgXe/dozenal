<!DOCTYPE html>
<html lang="en">

<!-- +AMDG -->

<head>
<title>dozcal | dozcal:  A Tutorial</title>
<meta charset="UTF-8" />
<meta name="description" content="dozenal, a complete suite
of dozenal programs, including number converts, an RPN
calculator, a graphical calculator, a metric system
converter, a pretty printer, a date and time program, and a
calendar program." />
<link rel="stylesheet" type="text/css" href="dozsty.css" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="icon" type="image/png" href="favicon.png" />
<link rel="license" 
	href="https://creativecommons.org/licenses/by-sa/2.0/" />
</head>
<body>

<div class="dedic">
<a href="amdg.html">+<br />
AMDG</a><br />
</div>

<header class="topbar">
<h1><a class="imglink" href="index.html"><img src="oth_digits.png" alt="dozenal Logo" /></a>dozenal</h1>

<nav class="toolbar">
<ul>
<li><a title="dozenal:  Download and Install" href="download.html">Download</a>&nbsp;|</li>
<li><a title="dozenal:  Documentation" href="doz_docs.html">Documentation</a>&nbsp;|</li>
<li><a title="dozenal:  Our Copyright" href="gpl-3.0-standalone.html">Copyright</a></li>
</ul>
</nav>
</header>

<div class="mainpart">

<h1>dozcal:  A Tutorial</h1>

<p><span class="fl">D</span> ozcal is an extremely powerful
program, and learning to use it effectively will do a world
of good, as well as enable you to use the power of your
computer to help you keep your calendar in dozenal.  We'll
address things in steps:  first, we'll address how to let
<span class="prog">dozcal</span> know what you want to be
kept in your calendar; then, how to make <span
class="prog">dozcal</span> display what you want in the way
you want it; and finally, how to automate <span
class="prog">dozcal</span>'s behavior so that it will work
that way without you having to tell it to every time.</p>

<a name="toc"></a>
<ul>
<li><a href="#data">Keeping a Calendar:  Your Date File(s)</a></li>
<ul>
<li><a href="#events">Events</a></li>
<ul>
<li><a href="#dateentry">Date Entry Formats</a></li>
<li><a href="#timeentry">Time Entry Formats</a></li>
<li><a href="#freq">Frequency Entry</a></li>
</ul>
<li><a href="#todos">Todos</a></li>
</ul>
<li><a href="#display">Displaying Your Data</a></li>
<ul>
<li><a href="#datetimeform">Date and Time Formatting</a></li>
<li><a href="#eventform">Event Formatting</a></li>
<li><a href="#todoform">Todo Formatting</a></li>
</ul>
<li><a href="#config">Customization</a></li>
<ul>
<li><a href="#conffile">Config Files</a></li>
</ul>
<li><a href="#script">Scripting Dozcal with Lua</a></li>
<li><a href="#output">Formatting your Output</a></li>
<li><a href="#gui">Graphical User Interface</a></li>
<li><a href="#conc">Conclusion</a></li>
</ul>


<a name="data"></a>
<h2>Keeping a Calendar:  Your Data File(s)</h2>

<p>Dozcal knows about two types of file:  config files and
data files.  Your data file is what <span
class="prog">dozcal</span> uses to determine what
information you want in your calendar:  it consists of two
types of entry, events and todos (that's "to do", as in
"things to do"), each of which is accompanied by a variety
of data.</p>

<p>Blank lines are ignored in these files; so put them in or
leave them out, <span class="prog">dozcal</span> won't care.
Lines cannot be broken, however, and there's presently no
way to add comments.</p>

<center><a href="#toc">Table of Contents</a></center>

<a name="events"></a>
<h3>Events</h3>

<p>Events are the typical calendar entry:  "Our
anniversary", "Staff Meeting."  A typical event entry might
look like this:</p>

<pre class="demo">
[EVENT]
TITLE:  Vacation
START_DATE:  14 August 1200
END_DATE:  21 August 1200
LOCATION:  Nag's Head, North Carolina
INTERVAL:  1
CLASS:  private
CATEGORY:  vacation
CATEGORY:  personal
</pre>

<p>This entry uses almost all of the possible parameters for
an event.  The remaining four are START_TIME, END_TIME,
EXCEPT_DATE, and FREQ, which we'll examine in due time.</p>

<p><span class="sdemo">TITLE</span> is just what it sounds
like:  what the event should be called.  The icalendar
standard calls this the event's "description."  <span
class="sdemo">START_DATE</span> and <span
class="sdemo">END_DATE</span> are pretty self-explanatory;
the event will cover the dates beginning with the starting
date and ending with the end date.  Dates can be entered in
<a href="#dateentry">a variety of formats</a>.</p>

<p>If there are dates within your range (between your start
date and end date) that you <em>not</em> want included, name
it with <span class="sdemo">EXCEPT_DATE</span>;<span class="prog">dozcal</span> will
not include your event on any date so listed.  You can
include as many exception dates as you wish.</p>

<p><span class="sdemo">START_TIME</span> and <span
class="sdemo">END_TIME</span> are also pretty
self-explanatory.  If you omit both,<span class="prog">dozcal</span> will just
treat it as an all-day event.  If you include a start time
but no end time or vice versa,<span class="prog">dozcal</span> won't complain, but
note that the latter doesn't make much sense.  Times can
also be entered in <a href="#timeentry">a few different
formats</a>.</p>

<p><span class="sdemo">LOCATION</span> is an arbitrary
string, meaning exactly what it sounds like.</p>

<p><span class="sdemo">CLASS</span> is typically a single
word telling something about the event; e.g., "private",
"confidential."  <span class="sdemo">CATEGORY</span> is
also what it sounds like; you can include as many category
lines as you wish, and they will be displayed as a
comma-separated list.</p>

<p><span class="sdemo">INTERVAL</span> is how many days
until the next iteration of the event.  By default, it is
set at 1, and in our example, it is explicitly set at 1,
which is useless but harmless.  If it had been set at 2,
then <em>every other date</em> in the range would have been
included; that is, the "Vacation" event would have been on
14 August 1200 (the start date); then on 16 August 1200;
then on 18 August; then on 1X August; then on 20 August; and
that would end it.  If it had been set at 3, then <em>every
third day</em> in the range would have been included; that
is, the "Vacation" event would have been on 14 August 1200;
17 August 1200; 1X August 1200; and 21 August 1200.</p>

<p>Intervals are often useful with <a href="#freq">FREQ</a>,
which we'll see in due time.</p>

<center><a href="#toc">Table of Contents</a></center>

<a name="dateentry"></a>
<h4>Date Entry Formats</h4>

<p>Dates can be entered in the following formats:</p>

<center>
<table class="realtable">
<tr><th>Format</th><th>Example</th></tr>
<tr><td>year-mo-da</td><td>1200-07-21</td></tr>
<tr><td>mo-da-year</td><td>07-21-1200</td></tr>
<tr><td>da mon year</td><td>21 Jul 1200</td></tr>
<tr><td>mon da, year</td><td>Jul 21, 1200</td></tr>
</table>
</center>

<p>In the first two cases, the hyphens can be replaced by
forward slashes, as is common in the United States.  The
spaces are optional in the second two.  The month must be
listed with at least the first three letters (capital or
lowercase is irrelevant), but can be listed with more.  The
year must always be given as all four digits.</p>

<center><a href="#toc">Table of Contents</a></center>

<a name="timeentry"></a>
<h4>Time Entry Formats</h4>

<p>Time can be entered in the following formats:</p>

<center>
<table class="realtable">
<tr><td>HH:MM</td></tr>
<tr><td>HH;BB</td></tr>
<tr><td>HH;BBBB</td></tr>
<tr><td>HHBB</td></tr>
</table>
</center>

<p>"H" stands for hours; "M" for minutes; "B" for biquas of
Tims, the standard TGM unit of time.  If the time includes a
colon,<span class="prog">dozcal</span> assumes that we're dealing with our standard
mongrel dozenal-sexagesimal time of hours and minutes, and
interprets it accordingly.  Otherwise, it assumes that we're
dealing with hours and Tims.</p>

<center><a href="#toc">Table of Contents</a></center>

<a name="freq"></a>
<h4>Frequency for Repetitive Events</h4>

<p>The only attribute for events that we haven't discussed
yet is <span class="sdemo">FREQ</span>,which provides a
generalized way to govern the frequency of an event.</p>

<p>FREQ works pretty simply:</p>

<ul>
<li>If there is the name of a weekday, then:</li>
<ul>
<li>If there is an ordinal number ("first"/"1st", etc.), or
the word "last", then:</li>
<ul>
<li>If there is a month name, then the event will be placed
on that ordinal weekday of that month whenever it falls
between the start date and end date; or, if there is no end
date, in the month named.  E.g., "third Tuesday in
April."</li>
<li>If there is no month name, then the event will be placed
on that ordinal weekday of every month in your range, or the
month of your start date if there is no end date.  E.g.,
"third Tuesdays."</li>
</ul>
<li>If there is no ordinal number, then it will be placed on
all of that weekday in your range, or in the month of your
start date (after the start date itself) if there is no end
date.  E.g., "Tuesdays."</li>
</ul>
<li>If there is not the name of a weekday, it looks for the
strings "monthly" or "yearly" (with no regard to
capitalization; the search is case-insensitive).  If it
finds "monthly", it will repeat the event every month from
the start date to the end date (or to the end of the
following year if there is no end date).  If it finds
"yearly", it will do the same every year.</li>
</ul>

<p>FREQ respects INTERVAL, so you can combine these in
interesting ways.  For example, by default INTERVAL is an
integer referring to a number of days (that's why there's no
"weekly"; you can just set INTERVAL to 7).  But if you've
put "monthly" in your FREQ, the interval will be counted by
<em>months</em>, not by days; so to set an event every other
month:</p>

<pre class="demo">
FREQ:  monthly
INTERVAL:  2
</pre>

<p>This also works with the more specific FREQ settings:</p>

<pre class="demo">
FREQ:  Tuesdays in April
INTERVAL:  2
</pre>

<p>This will set the first and third Tuesdays in April (and,
of course, the fifth if there is one); the INTERVAL being 2
makes it select every other Tuesday in April, rather than
every one.  A similar construction with a FREQ setting of
"monthly" and an INTERVAL of 2 will set an event in every
other month; or a FREQ setting of "monthly", a START_DATE
setting of "01 Jan 1200", and an INTERVAL of 3 will set the
event quarterly.</p>

<p>You can use up to 14 (one dozen four) FREQ directives,
and <span class="prog">dozcal</span> will respect all of them.  For example, say you
have a special meeting from 11;00-12;00 every second and
fourth Wednesday of the month.  The following will set it up
for you:</p>

<pre class="demo">
[EVENT]
TITLE:  Special Meeting
FREQ:  Second Wednesday
FREQ:  Fourth Wednesday
START_DATE:  01 Jan 1200
END_DATE:  27 Dec 1200
START_TIME:  11;00
END_TIME:  12;00
</pre>

<p>These attributes give ample power to set dates whenever
you want, without having to individually pick out each of
recurring dates.  In other words, it leaves the drudgery to
the computer, where it belongs, and leaves you the important
task of deciding what you're actually doing.</p>

<p>Next, we'll look at todos, which allow you to set and
prioritize tasks for yourself.</p>

<center><a href="#toc">Table of Contents</a></center>

<a name="todos"></a>
<h3>Todos</h3>

<p>Todos provide a means of listing tasks that need to be
completed, along with due dates and times; whether the tasks
are already completed or not; the perbiqua (dozenal
equivalent of percent) completed that they are; and the
priority of the task.  A typical todo is below:</p>

<pre class="demo">
[TODO]
DUE_DATE:	1200/07/27
TITLE:		Finish Garden Project
LOCATION:	Home
PRIORITY:	4
DUE_TIME:	1700
COMPLETED:	0
PERGROSS:	57
CLASS:		Private
CATEGORY:	home
CATEGORY:	personal
CATEGORY:	agricultural
</pre>

<p>(Notice that, unlike the example event above, this todo
has used tabs to separate the field names from the field
values.  Tabs and spaces can be mixed interchangeably with
no difference in meaning.)</p>

<p>The above example include all the possible fields for a
todo.  Note that, rather than start times and end times, we
are now dealing with due dates and due times.  These can be
entered with the same formats as dates and times for
events.</p>

<p>The <span class="sdemo">COMPLETED</span> field is either
a 0, for incomplete, or 1, for complete.</p>

<p>The <span class="sdemo">PERGROSS</span> field tells how
much progress you hae made on the todo, expressed as parts
per biqua (traditionally called a "gross").  You should
<em>not</em> use a "%" sign when entering this.</p>

<p>Finally, <span class="sdemo">PRIORITY</span> is what it
sounds like, and is entered as an integer:  the lower the
integer, the more important the task.  So a 0 is highest
priority.  How you scale these things is up to you, of
course.</p>

<p>The rest of the fields of a todo are identical to their
analogues in events, so they won't require any
elaboration.</p>

<p>This much is all well and good; but now that we know how
to put our calendar into text, what good is <span class="prog">dozcal</span> to us?
How can we access and display our calendar in a convenient
way?</p>

<center><a href="#toc">Table of Contents</a></center>

<a name="display"></a>
<h2>Displaying your Calendar</h2>

<p>When you ask <span class="prog">dozcal</span> for your
calendar events, it takes care of sorting them for you.
Events are sorted by start date, then by start time, then by
title.  Todos are sorted by priority; then by due date; then
by due time; and then by title.  Events and todos are sorted
separately.</p>

<center><a href="#toc">Table of Contents</a></center>

<a name="datetimeform"></a>
<h3>Date and Time Formatting</h3>

<p>If you're not familiar with how format control strings
work, reading through "<a
href="dozdate_tut.html#formstring">Formatting Strings</a>"
should give you a decent introduction.  All of dozcal's
formatting works through such formatting strings, so getting
a good idea of the concept is important.</p>

<p>The date and time are formatted independently from <a
href="#eventform">events</a> and <a
href="#todoform">todos</a> (that is, when you include a date
or time in an event or todo formatting string, it will be in
the form dictated by the date or time formatting string), so
date and time strings are broadly applicable.</p>

<p>The date is formatted exactly as in standard Unix <span
class="prog">date</span>, which has <a
href="http://www.linux.die.net/man/1/date">a very complete
manual</a> for your use.  You can also see the <a
href="dozdate.html">dozdate manual</a>, but remember that
<span class="prog">dozcal</span> does <em>not</em> accept the
"@" sequences from <span class="prog">dozdate</span>, as they
are not needed for <span class="prog">dozcal</span>'s use
case.</p>

<p>All the numbers requested in the date format will be in
dozenal.  The default date format is:</p>

<pre class="demo">
%Y-%m-%d
</pre>

<p>This will produce dates in the form of:  "1200-07-27".
The default time format is:</p>

<pre class="demo">
"%h;%4b"
</pre>

<p>This will produce times in the form of:  "11;2345".
Note that the time format only has two available control
sequences, <span class="sdemo">%h</span> and <span
class="sdemo">%b</span>, which stand for "hours" and "biqua"
respectively.  (The four-digit Tim number is referred to as
biqua of Tims, because it's often listed in two digits,
which shows us the number of biquaTim and triquaTim.)</p>

<center><a href="#toc">Table of Contents</a></center>

<a name="eventform"></a>
<h3>Event Formatting</h3>

<p>The event format is where things get a bit different.
There are five possible control sequences for event
formats:</p>

<center>
<table class="realtable">
<tr><th>Seq.</th><th>Meaning</th><th>Data File Line</th></tr>
<tr><td>%e</td><td>Event title</td><td>TITLE:</td></tr>
<tr><td>%d</td><td>Event date; equivalent to the start date</td>
	<td>START_DATE:</td></tr>
<tr><td>%s</td><td>Event's start time</td>
	<td>START_TIME:</td></tr>
<tr><td>%c</td><td>Event's end (closing) time</td>
	<td>END_TIME:</td></tr>
<tr><td>%C</td><td>Event's list of categories; if there are multiple
	categories, they will be separated by commas</td>
	<td>CATEGORY:</td></tr>
<tr><td>%t</td><td>Event's class ("type")</td>
	<td>CLASS:</td></tr>
<tr><td>%l</td><td>Event's location</td><td>LOCATION:</td></tr>
</table>
</center>

<p>Oftentimes, all of this information will not be
interesting to you, but you can put as much or as little of
this in your event formats as you wish.  The default event
format is:</p>

<pre class="demo">
%d | %s | %c | %e | %t | %C | %l
</pre>

<p>Note that this includes all possible fields clearly
delineated by a consistent character.  This format enables
easy parsing by other programs, if <span
class="prog">dozcal</span>'s output should be sent to one of
them.</p>

<center><a href="#toc">Table of Contents</a></center>

<a name="todoform"></a>
<h3>Todo Formatting</h3>

<p>Todos have different available control strings:</p>

<center>
<table class="realtable">
<tr><th>Seq.</th><th>Meaning</th><th>Date File Line</th></tr>
<tr><td>%i</td><td>The todo item, or title</td>
	<td>TITLE:</td></tr>
<tr><td>%p</td><td>The priority of the todo</td>
	<td>PRIORITY:</td></tr>
<tr><td>%d</td><td>The due date of the todo</td>
	<td>DUE_DATE:</td></tr>
<tr><td>%t</td><td>The due time of the todo</td>
	<td>DUE_TIME:</td></tr>
<tr><td>%c</td><td>The completedness of the todo; remember
	that this will be either 0 (if incomplete) or 1 (if
	complete)</td>
	<td>COMPLETED:</td></tr>
<tr><td>%g</td><td>The pergross completedness of the todo;
	do <em>not</em> use a "%"</td>
	<td>PERGROSS:</td></tr>
<tr><td>%T</td><td>The class or type of the todo.</td>
	<td>CLASS:</td></tr>
<tr><td>%C</td><td>The category list of the todo, with
	multiple categories separated by commas</td>
	<td>CATEGORY:</td></tr>
<tr><td>%l</td><td>The location of the todo.</td>
	<td>LOCATION:</td></tr>
</table>
</center>

<p>The default todo format line is as follows:</p>

<pre class="demo">
%p | %d | %t | %i | %c | %g | %T | %C | %l
</pre>

<p>Note again that this includes every field possible
clearly delineated by a consistent character, allowing easy
post-processing by other programs.</p>

<center><a href="#toc">Table of Contents</a></center>

<a name="config"></a>
<h2>Configuring your Calendar</h2>

<p>Finally, <span class="prog">dozcal</span> allows you to
configure your calendar to work precisely the way you'd like
it to.  You can do this in two ways:  by command line
switches, or by a config file.  (Or both; the last loaded
option will take precedence.)</p>

<center><a href="#toc">Table of Contents</a></center>

<a name="conffile"></a>
<h3>Config Files</h3>

<p>By default, <span class="prog">dozcal</span> will first
check the command line that started it for a <span
class="sdemo">-c</span> option, which takes a single
argument, the path of a file.  If there is a <span
class="sdemo">-c</span> argument, <span
class="prog">dozcal</span> will use that file as its config
file; if there is not, it will look for <span
class="sdemo">$HOME/.dozcal/dozcalrc</span>.  If that file
exists, it will use that file as a config file; if it does
not, it will proceed with no config file.</p>

<p>You <em>can</em> list more than one config file with
<span class="sdemo">-c</span>; options loaded in later files
will take precedence over those loaded in earlier files.
Config file options will also take precedence over
command-line options loaded prior to the config file.
Essentially, the last-specified option is the one that <span
class="prog">dozcal</span> will respect.</p>

<p>All command-line options can also be set in a config
file, so we'll present them together below.  Config-file
options followed by a colon require an argument; those
without can be used on their own.  The colon is necessary
for <span class="prog">dozcal</span> to understand the
option and its argument.</p>

<table class="realtable">
<tr><th>CLI Opt.</th><th>Config Opt.</th><th>Meaning</th></tr>
<tr><td>-T</td><td>PRINT_TODOS</td>
	<td>Print todos as well as events; by default, events 
	are printed by todos are not</td></tr>
<tr><td>-E</td><td>NO_EVENTS</td>
	<td>Do <em>not</em> print events, which are printed by
	default.  If you have not also use -T or PRINT_TODOS,
	nothing will be printed.</td></tr>
<tr><td>-m</td><td>MOON_PHASE:</td>
	<td>Print the moon phases in your calendar.  Takes a
	single word as an argument:  "major", which will print
	the four primary phases (new, first quarter, full, third
	quarter), or "all", which will print the primary phases
	but also the phase for every day of the cycle.  This
	takes the form of an integer between 1 and 25 (29 in
	decimal), where "0" is new and "13" is full.</td></tr>
<tr><td>-g</td><td>GEOG:</td>
	<td>Geographical information; <span
	class="prog">dozcal</span> uses this information to
	determine certain astronomical information, particularly
	sunrise and sunset times.  If you don't give this
	information, <span class="prog">dozcal</span> will
	(almost certainly incorrectly) assume a latitude of 0 and
	a longitude of 0.  Give this information in the form
	"latitude/longitude", in that order, separated by a
	slash.  If you give these in degrees, suffix the degrees
	with "o" (the lowercase letter); if you give them in
	degrees, minutes, and seconds, use "o" for degrees, an
	apostrophe for minutes, and a double-quote for seconds.
	If you give them in unciaPi (the TGM unit of angle), no
	suffix is needed.</td></tr>
<tr><td>-a</td><td>ASTRON:</td>
	<td>Tells <span class="prog">dozcal</span> to include
	astronomical events in your calendar.  This takes a
	string which can be concatenated however you like.
	Possible strings are "seasons", which includes the
	equinoxes and solstices; and "sun", which includes
	sunrise and sunset times.  Unless a time zone option is
	given, or UTC time is requested, <span
	class="prog">dozcal</span> will give these in local time
	according to your system's clock.</td></tr>
<tr><td>-z</td><td>TIMEZONE:</td>
	<td>If you don't want <span class="prog">dozcal</span> to
	use your local timezone or UTC time, you can explicitly
	tell it what time zone to use with this option.  Note
	that this isn't really a time zone; it's a time
	<em>offset</em>, telling <span class="prog">dozcal</span>
	to use a given number of hours, fractional or whole,
	positive or negative, to add to UTC times to produce
	local time.  If this option is not given (or the UTC
	option is not given), <span class="prog">dozcal</span>
	will attempt to use the system's clock to produce local
	time.  </td></tr>
<tr><td>-u</td><td>UTCTIME</td>
	<td>Use UTC time where <span class="prog">dozcal</span>
	would normally try to use local time.  Essentially
	cancels out the time zone options.</td></tr>
<tr><td>-n</td><td>NATIONAL:</td>
	<td>Takes a string which includes any number of countries
	for which you'd like national holidays displayed.
	Possible options are "usa", "uk", "eng", "wales", "scot",
	"nire" (for Northern Ireland), "rire" (for Republic of
	Ireland), "austral", "nz" or "kiwi", and "canada".  Note
	that many of these will be duplicates.</td></tr>
<tr><td>-h</td><td>RELIGIOUS:</td>
	<td>Takes a string which includes any number of religious
	holidays which you'd like displayed.  Possible strings
	are "west" (for Western Christian holidays); "east" (for
	Eastern Christian holidays); "jew" (for Jewish holidays);
	and "isl" for Islamic holidays.  Note that all of these
	only include a few prominent holidays (see the manual for
	which); further note that the "jew" and "isl" settings
	ignore some of the pricklier issues of the traditional
	religious lunar calendars.</td></tr>
<tr><td>-s</td><td>N/A</td><td>The beginning of the date
	range that you'd like <span class="prog">dozcal</span> to
	output to you.</td></tr>
<tr><td>-e</td><td>N/A</td><td>The end of the date range
	that you'd like <span class="prog">dozcal</span> to
	output to you.</td></tr>
<tr><td>-d</td><td>DATE_FORMAT:</td>
	<td>The format of the date when it is displayed; see <a
	href="#datetimeform">Date and Time Formatting</a>, and
	the <a href="dozcal.html">manual</a>, for more
	detail.</td></tr>
<tr><td>-t</td><td>TIME_FORMAT:</td>
	<td>The format of the time when it is displayed; see <a
	href="#datetimeform">Date and Time Formatting</a>, and
	the <a href="dozcal.html">manual</a>, for more
	detail.</td></tr>
<tr><td>-r</td><td>EVENT_FORMAT:</td>
	<td>The format of the events when they are displayed; see
	<a href="#eventform">Event Formatting</a>, and the <a
	href="dozcal.html">manual</a>, for more detail.</td></tr>
<tr><td>-R</td><td>TODO_FORMAT:</td> <td>The format of the
	todos when they are displayed; see <a
	href="#todoform">Event Formatting</a>, and the <a
	href="dozcal.html">manual</a>, for more detail.</td></tr>
<tr><td>-f</td><td>INPUT:</td>
	<td>A data file for <span class="prog">dozcal</span> to
	process and include in its internal database of events
	and todos.  You can repeat these with as many different
	files as you'd like, though note that if you include the
	same file twice its events and todos will also be
	included twice.</td></tr>
<tr><td>-c</td><td>N/A</td><td>A config file for <span
	class="prog">dozcal</span> to process.</td></tr>
<tr><td>-w</td><td>WEEKLY</td><td>Get weekly output; that
	is, get the output for the week which contains your start
	date.  Will ignore any end date you've given it; only has
	effect if you've given a start date, as otherwise it
	won't know what week to give you.</td></tr>
<tr><td>-W</td><td>FIRST_DOW:</td><td>The first day of the
	week; can be any day whatsoever, though typically it's
	either Sunday or Monday.  Can be either an integer 0-6,
	with 0 being Sunday, or the first three letters of the
	weekday itself (e.g., "thu").  You can capitalize or not
	at your pleasure; <span class="prog">dozcal</span> will
	not see the difference.</td></tr>
<tr><td>-l</td><td>SCRIPT:</td><td>Tells <span
	class="prog">dozcal</span> to run the Lua script which is
	its argument and use its returns as events.  This enables
	you to directly program in moveable holidays and the
	like, rather than having to enter them manually in your
	data file.  <span class="prog">dozcal</span> looks for
	the scripts first in its current directory, then in <span
	class="sdemo">$HOME/.dozcal/</span>, which allows you to
	keep all your scripts in an easy place.</td></tr>
</table>

<p>With these options, you can make dozcal output in almost
any way you like; and by filtering its output, you can get
formatted output, such as HTML or LaTeX.</p>

<center><a href="#toc">Table of Contents</a></center>

<a name="script"></a>
<h2>Scripting</h2>

<p><span class="prog">dozcal</span> allows you to script it
directly with Lua, a very small and simple computer
language.  We've noted that <span class="prog">dozcal</span>
only includes a small number of religious and national
holidays, making it difficult to include new ones; the data
file itself is static, so you'd have to figure out what days
other holidays fall on each year and include them in your
data file manually.  Scripting means you don't have to do
that.</p>

<p>By writing a script, you can instruct <span
class="prog">dozcal</span> that, say, the 24th of October is
a holidays, unless it falls on a Sunday, in which it's the
25th of October.  Such things are impossible to program in
the data file.</p>

<p>Lua is a powerful language, and we can't explain how to
script in it here; there are plenty of resources available
for that.  However, we can tell you what <span
class="prog">dozcal</span> expects to get from your Lua
script.</p>

<p>Your lua script should include at least two functions:
<span class="sdemo">dozcal_return_ev_num()</span> and <span
class="sdemo">dozcal_return_ev()</span>.  The first of these
functions needs to return a single integer value:  the
number of events that your script will be adding.  This
could be variable depending on the year or other factors, so
it's best to tell Lua to compute this result for you.</p>

<p>The second, <span
class="sdemo">dozcal_return_ev()</span>, returns the actual
events.  The best way to do this is to return each event as
a table, with the event field names as the keys to that
table and the values for those fields as the values.  If
you're returning multiple events, keep these tables in an
table of tables and return it with <span
class="sdemo">unpack</span>.  For example:</p>

<pre class="demo">
...
returntab[index] = {
	START_DATE="22 April 1200",
		TITLE="My Special Holiday",CLASS="",
		START_TIME="",END_TIME="", LOCATION="",
		CATEGORY=""
}
...
returntab = {{}}
index = 1

function dozcal_return_ev()
	return unpack(returntab)
end

function dozcal_return_ev_num()
	return fill_year(2016,returntab,index)
end
</pre>

<p>Here, we've defined <span class="sdemo">returntab</span>
as a global table of tables, along with an index to keep
track of the number of tables it contains.  We then defined
the function <span class="sdemo">fill_year()</span> (that
definition is not shown here), which fills the values into
the table of tables and returns the total number of results.
This way, function <span
class="sdemo">dozcal_return_ev_num()</span> returns the
total number of results while simultaneously filling the
table with events, while <span
class="sdemo">dozcal_return_ev()</span> returns the table
itself.</p>

<p>Of course, the values of your returned tables,
particularly the date, will likely be determined by Lua
programmatically, so you'll likely have a variable for <span
class="sdemo">START_DATE</span> rather than an explicit
string.  However, that's the principle of the thing.</p>

<p>As an example, included with <span
class="prog">dozcal</span> is an implementation of the
entire Catholic liturgical calendar of 1176, which contains
many fixed and many variable dates.  Its file name is 
<span class="sdemo">cath_lit_1176.lua</span>, and will give
you some idea of the possibilities here.</p>

<center><a href="#toc">Table of Contents</a></center>

<a name="output"></a>
<h2>Output Filtering</h2>

<p>Since <span class="prog">dozcal</span> produces such
simply formatted plain text output, and since you can
arrange that output pretty much however you want, it's also
very easy to filter its output into formats the way you'd
like it.  Since it's also a well-behaved Unix program and
sends its output to stdout, you can ship it through any
program you want for formatting.</p>

<p>Well it's not the new shiny of Perl or Python, <span
class="prog">dozcal</span> comes packaged with two scripts
written in <a
href="http://www.grymoire.com/Unix/Awk.html">awk</a>, the
original (and, in my opinion, still the best) Unix
text-filtering language.  In any case, these two scripts
take default <span class="prog">dozcal</span> output and
format it:  <span class="sdemo">fancy.awk</span> into a
fancier text format and <span
class="sdemo">week_html.awk</span> into HTML output,
formatted as a single week.  This latter expects its input
from <span class="prog">dozcal</span> using the <span
class="sdemo">-w</span> option.</p>

<p>These scripts are  pretty self-explanatory, so we'll
briefly look at <span class="sdemo">fancy.awk</span> as an
example:</p>

<pre class="demo">
#!/usr/bin/awk -f

BEGIN {
	FS = " \\| "
	lastdate = ""
}

// {
	currdate = $1
	if (currdate != lastdate) {
		printf "-------------------------------------------------"
		printf "------------\n"
		printf "%-13.13s%-30.30s%-18.18s\n","DATE","EVENT","LOCATION"
		printf "-------------------------------------------------"
		printf "------------\n"
		printf "%-13.13s",$1
		lastdate = $1
	} else {
		printf "%-13.13s"," "
	}
	printf "%-30.28s%-18.18s\n",$4,$7
	if ($2 != "") {
		printf "%13.13s\t%7.7s"," ",$2
	} if ($3 != "") {
		printf "--%7.7s",$3
	} if (($2 != "") || ($3 != "")) {
		printf("\n")
	}
	if ($5 != "") {
		printf("%13.13s\t%-16.16s\n"," ",$5)
	} if ($6 != "") {
		printf("%13.13s\t%-60.60s\n"," ",$6)
	}
}
</pre>

<p>With this script, each date's output will wind up looking
something like this:</p>

<pre class="demo">
-------------------------------------------------------------
DATE         EVENT                         LOCATION          
-------------------------------------------------------------
27 Oct 1200  Enddate:  Last Monday         Working?          
             Feria                                           
             	Catholic:  1176 
             	IV Class,traditional,catholic,feast                         
             Moon Phase:  1                                  
             	astronomical                                                
             My Test Event #1                                
             	0X;0000--1E;3000
             	confidential    
             	anniversary,business                                        
</pre>

<p>Of course, these scripts are just demonstrative; by no
means is anyone limited to them.  The sky's the limit as far
as formatting your output goes.</p>

<center><a href="#toc">Table of Contents</a></center>

<a name="gui"></a>
<h2>Graphical User Interface</h2>

<p><span class="prog">dozcal</span> also offers, when run
with the <span class="sdemo">-v</span> option, a graphical
user interface; more specifically, a text user interface
(TUI), which uses the terminal or terminal emulator screen
to present a graphical interface to the user.</p>

<p>The graphical interface <em>does not in any way alter
your data</em>.  You don't add or delete events or todos
from your calendar through this interface; your data files
will always be intact.  This means that your data
<em>cannot</em> be corruptedf by bugs in the interface.</p>

<p>Running <span class="sdemo">dozcal -v</span> should
produce something along these lines:</p>

<div class="demonstimg">
<img title="Screenshot of dozcal -v upon opening the program, assuming no color configuration" 
	alt="Screenshot of dozcal -v upon opening the program, assuming no color configuration" 
	src="dozcal_tui_nocolor.png" />
<p>Screenshot of <span class="prog">dozcal -v</span> immediately
upon starting the program, assuming no color configuration.</p>
</div>

<p>Of course, this doesn't have any data (that is, events or
todos) contained in it.  Your default colors may be
different; <span class="prog">dozcal</span> is running here
without any configured colors, so it will use the default
colors.  Your colors can range from the tasteful:</p>

<div class="demonstimg">
<img title="dozcal -v with a reasonably tasteful color scheme" 
	alt="dozcal -v with a reasonably tasteful color scheme" 
	src="dozcal_tasteful.png" />
<p>Screenshot of <span class="prog">dozcal -v</span>
sporting a reasonably tasteful color scheme</p>
</div>

<p>To the truly garish:</p>

<div class="demonstimg">
<img title="dozcal -v with a ghastly color scheme" 
	alt="dozcal -v with a ghastly color scheme" 
	src="dozcal_garish.png" />
<p>Screenshot of <span class="prog">dozcal -v</span>
sporting a ghastly color scheme</p>
</div>

<p>The available colors are truly arbitrary; however, not
all terminal emulators can support all colors.  If you limit
yourself to "red", "blue", "green", "yellow", "magenta",
"cyan", "black", and "white", you are almost certainly safe;
if you want more particular colors, you need to make sure
that your terminal can handle them.  The first of the
screenshots above, the "tasteful" one, shows the warning (in
the bottom line) printed by <span class="prog">dozcal</span>
when the terminal does not support non-standard colors; this
was taken from <span class="prog">xterm</span>.  The garish
screenshots supports arbitrary colors; it was taken in <span
class="prog">rxvt-unicode</span>.</p>

<p>Colors are listed as options in your option file, just
like the other options we discussed earlier.  All-capitals,
followed by a colon, followed by the color, as such:</p>

<pre class="demo">
CALENDAR_BG:	red
</pre>

<p>The standard colors listed above can be used by name;
other colors can be specified with standard RGB (red green
blue) notation, each color having a range of 0-1000
(dozenal, of course).  For example, for "orange", try the
following:</p>

<pre class="demo">
CALENDAR_BG:	(1000,900,0)
</pre>

<p>The different elements which can be colored are as
follows:</p>

<table class="realtable">
<tr><td>NOCOLOR</td>
	<td>Don't use color at all; stick to the terminal's
	default colors</td></tr>
<tr><td>CALENDAR_BG</td>
	<td>The calendar window's background color (at least,
	those parts of the calendar window which do not contain
	any other elements</td></tr>
<tr><td>EVENT_BG</td>
	<td>Like CALENDAR_BG, but for your event window.</td></tr>
<tr><td>TODO_BG</td>
	<td>Like CALENDAR_BG, but for your todo window.</td></tr>
<tr><td>CAL_TITLE_FORE</td>
	<td>The foreground color (that is, the text color) of
	your calendar window's title.</td></tr>
<tr><td>CAL_TITLE_BACK</td>
	<td>The background color of your calendar window's title.</td></tr>
<tr><td>CAL_WEEK_FORE</td>
	<td>The foreground color (that is, the text color) of
	the week text (the text listing the days of the week) in
	your calendar window.</td></tr>
<tr><td>CAL_WEEK_BACK</td>
	<td>The background color of the week text.</td></tr>
<tr><td>CAL_FORE</td>
	<td>The foreground color (that is, the text color) of the
	actual day numbers in the calendar window.</td></tr>
<tr><td>CAL_BACK</td>
	<td>The background color of the day numbers in the
	calendar window.</td></tr>
<tr><td>TODO_TITLE_FORE</td>
	<td>The foreground color (that is, the text color) of the
	title line in the todo window.</td></tr>
<tr><td>TODO_TITLE_BACK</td>
	<td>The background color of the title line in the todo
	window.</td></tr>
<tr><td>TODO_LINE_FORE</td>
	<td>The color of the line between the title and the
	content of the todo window.</td></tr>
<tr><td>TODO_LINE_BACK</td>
	<td>The background of the line between the title and the
	content of the todo window.</td></tr>
<tr><td>TODO_FORE</td>
	<td>The foreground color (that is, the text color) of the
	todo window's text.</td></tr>
<tr><td>TODO_BACK</td>
	<td>The background color of the todo window's text.</td></tr>
<tr><td>EV_TITLE_FORE</td>
	<td>The foreground color (that is, the text color) of the
	event window's title.</td></tr>
<tr><td>EV_TITLE_BACK</td>
	<td>The background color of the event window's title.</td></tr>
<tr><td>EV_LINE_FORE</td>
	<td>The color of the line separating the event window's
	title and the event window's content.</td></tr>
<tr><td>EV_LINE_BACK</td>
	<td>The background color of the line separating the event
	window's title and event window's content.</td></tr>
<tr><td>EV_FORE</td>
	<td>The foreground color (that is, the text color) of the
	content of the event window.</td></tr>
<tr><td>EV_BACK</td>
	<td>The background color of the content of the event
	window.</td></tr>
<tr><td>TITLE_FORE</td>
	<td>The foreground color (that is, the text color) of the 
	title bar on the top of the screen.</td></tr>
<tr><td>TITLE_BACK</td>
	<td>The background color of the title bar on the top of
	the screen.</td></tr>
<tr><td>BOT_FORE</td>
	<td>The foreground color (that is, the text color) of the 
	line containing the key bindings on the bottom of
	the screen.</td></tr>
<tr><td>BOT_BACK</td>
	<td>The background color of the line containing the key
	bindings on the bottom of the screen.</td></tr>
<tr><td>WARNING_FORE</td>
	<td>Warnings are printed on the very last line of the
	screen; this controls the foreground color (that is, the
	text color) of that warning line.</td></tr>
<tr><td>WARNING_BACK</td>
	<td>The background color of the warning line.</td></tr>
<tr><td>INACTIVE_BORDER_FORE</td>
	<td>The border color of the two inactive windows.</td></tr>
<tr><td>INACTIVE_BORDER_BACK</td>
	<td>The background color of the border of the two
	inactive windows.</td></tr>
<tr><td>ACTIVE_BORDER_FORE</td>
	<td>The border color of the active window.</td></tr>
<tr><td>ACTIVE_BORDER_BACK</td>
	<td>The background color of the border of the active
	window.</td></tr>
</table>

<p>Many of these parameters, of course, should be colored to
match or contrast with one another.  That is an exercise of
taste left to the user.  The "tasteful" version above, used
personally by the author, follows:</p>

<pre class="demo">
ACTIVE_BORDER_FORE: red
INACTIVE_BORDER_FORE: green
TITLE_FORE:  blue
TITLE_BACK:  yellow
EV_LINE_FORE:  green;
TODO_LINE_FORE:  green;
BOT_FORE:  blue
BOT_BACK:  yellow
WARNING_FORE:  red
</pre>

<center><a href="#toc">Table of Contents</a></center>

<a name="conc"></a>
<h2>Conclusion</h2>

<p>With its built-in power to manage events and todos,
combined with the ability to include and distribute input
Lua scripts and output filters in any language, <span
class="prog">dozcal</span> becomes a very powerful and
configurable system.  I hope it's as useful to you as I've
found it to be.</p>

<hr />
<footer class="bottomstuff">
<div class="homelink"><a href="index.html">Home</a></div>
<a href="webmas.html">E-Mail the Webmaster</a><br />
<a href="http://www.github.com/dgoodmaniii/dozenal/">To the Source!</a><br />
</footer>
</div>
</body>
</html>
